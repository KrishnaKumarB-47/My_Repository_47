{% extends "base.html" %}

{% block title %}Buyer Dashboard - AI Artisan Marketplace{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h1>Welcome, {{ session.name }}!</h1>
        <p>Discover unique handmade products with AI-powered recommendations</p>
    </div>
    
    <div class="dashboard-actions">
        <a href="{{ url_for('browse') }}" class="btn btn-primary">
            <i class="fas fa-search"></i> Browse All Products
        </a>
        <a href="{{ url_for('cart') }}" class="btn btn-secondary">
            <i class="fas fa-shopping-cart"></i> View Cart
        </a>
    </div>
    
    <div class="recommendations-section">
        <h2>Recommended for You</h2>
        {% if recommendations %}
            <div class="products-grid">
                {% for product in recommendations %}
                <div class="product-card" onclick="viewProduct({{ product[1] }})">
                    <div class="product-image">
                        <i class="fas fa-image"></i>
                    </div>
                    <div class="product-info">
                        <h3>{{ product[2] }}</h3>
                        <p class="product-description">{{ product[3] }}</p>
                        <p class="product-category">{{ product[0] }}</p>
                        <p class="product-price">â‚¹{{ "%.2f"|format(product[4]) }}</p>
                        <p class="product-artisan">by {{ product[7] }}</p>
                        {% if product[6] %}
                        <div class="ai-story-preview">
                            <h4>AI Story:</h4>
                            <p>{{ product[6][:150] }}{% if product[6]|length > 150 %}...{% endif %}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <i class="fas fa-search"></i>
                <h3>No recommendations yet</h3>
                <p>Start browsing products to get personalized recommendations!</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function viewProduct(productId) {
    window.location.href = `/view_product/${productId}`;
}
</script>
{% endblock %}

